/*
 * cs35l53.h -- Cirrus CS35L53 Audio driver
 *
 * Copyright 2021 American Megatrends Corp. All rights reserved.
 * Author: Eddy Lu <eddylu@ami.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#ifndef __DRIVERS_SOUND_CS35L53_H__
#define __DRIVERS_SOUND_CS35L53_H__

#include "drivers/bus/i2c/i2c.h"
#include "drivers/bus/i2s/intel_common/i2s.h"
#include "drivers/gpio/gpio.h"
#include "drivers/sound/route.h"
#include "drivers/sound/sound.h"

typedef struct
{
	SoundOps ops;
	I2cOps *i2c;
	uint8_t chip;
	int sample_rate;
	SoundRouteComponent component;
} cs35l53Codec;

cs35l53Codec *new_cs35l53_codec(I2cOps *i2c, uint8_t chip);
extern const I2sSettings cs35l53_settings;
#define AUD_CS35L53_DEVICE_ADDR1	0x40
#define AUD_CS35L53_DEVICE_ADDR2	0x41
#define AUD_CS35L53_DEVICE_ADDR3	0x42
#define AUD_CS35L53_DEVICE_ADDR4	0x43

/* cs35l53 registers address */
#define CS35L53_RST			0x00000020
#define CS35L53_TEST_KEY_CTRL		0x00000040
#define CS35L53_GLOBAL_ENABLES		0x00002014
#define CS35L53_BLOCK_ENABLES		0x00002018
#define CS35L53_GPIO_PAD_CTRL		0x0000242C
#define CS35L53_REFCLK_INPUT		0x00002C04
#define CS35L53_GLOBAL_SAMPLE_RATE	0x00002C0C
#define CS35L53_PLL_CONFIG1		0x00003018
#define CS35L53_BOOST_TEST_MANUAL	0x0000393C
#define CS35L53_ASP_ENABLES1		0x00004800
#define CS35L53_ASP_CONTROL1		0x00004804
#define CS35L53_ASP_CONTROL2		0x00004808
#define CS35L53_ASP_FRAME_CONTROL5	0x00004820
#define CS35L53_ASP_DATA_CONTROL5	0x00004840
#define CS35L53_ASP_DACPCM1_INPUT	0x00004C00
#define CS35L53_AMP_CTRL		0x00006000
#define CS35L53_AMP_GAIN		0x00006C04
#define CS35L53_DAC_MSM_CONFIG		0x00007400
#define CS35L53_TST_SPK_2		0x00007414
#define CS35L53_SPK_FORCE_TST_2         0x0000742C
#define CS35L53_SPK_MSM_TST_3		0x00007438
#define CS35L53_IRQ1_STS_1		0x00010090
#define CS35L53_GPIO1_CTRL1		0x00011008

/* cs35l53 data values */
#define CS35L53_SFT_RST				0x5A000000
#define CS35L53_TEST_KEY_ENABLE_1		0x00000055
#define CS35L53_TEST_KEY_ENABLE_2		0x000000AA
#define CS35L53_TEST_KEY_DISABLE_1		0x000000CC
#define CS35L53_TEST_KEY_DISABLE_2		0x00000033
#define CS35L53_GLOBAL_EN			0x00000001
#define CS35L53_GLOBAL_DIS			0x00000000
#define CS35L53_IMON_EN				0x00002000
#define CS35L53_VMON_EN				0x00001000
#define CS35L53_TEMPMON_EN			0x00000400
#define CS35L53_VBSTMON_EN			0x00000200
#define CS35L53_VPMON_EN			0x00000100
#define CS35L53_BST_EN				0x00000020
#define CS35L53_AMP_EN				0x00000001
#define CS35L53_GP1_CTRL_GPIO			0x00010000
#define CS35L53_GP1_CTRL_HI			0x00000000
#define CS35L53_PLL_REFCLK_FREQ			0x00000420
#define CS35L53_PLL_OPEN_LOOP			0x00000800
#define CS35L53_PLL_REFCLK_EN			0x00000010
#define CS35L53_GLOBAL_FS			0x00000003
#define CS35L53_PLL_FRC_FREQ_LOCK_EN		0x02000000
#define CS35L53_BOOST_TEST_MANUAL_ENABLE	0x000000c0
#define CS35L53_BOOST_TEST_MANUAL_DISABLE	0x00000000
#define CS35L53_ASP_RX1_EN			0x00010000
#define CS35L53_ASP_BCLK_FREQ			0x00000021
#define CS35L53_ASP_TX_RX_WIDTH1		0x20100200
#define CS35L53_ASP_TX_RX_WIDTH2		0x18180233
#define CS35L53_ASP_RX1_SLOT			0x00000000
#define CS35L53_ASP_RX_WL			0x00000018
#define CS35L53_ASP_DACPCM1_SRC_DIAG_GEN	0x00000004
#define CS35L53_ASP_DACPCM1_SRC_ASPRX1		0x00000008
#define CS35L53_AMP_VOL_PCM			0x00008000
#define CS35L53_AMP_HPF_PCM_DIS			0x00000000
#define CS35L53_AMP_GAIN_PCM_PDM		0x00000073
#define CS35L53_AMP_DIAG_SEL			0x00580200
#define CS35L53_AMP_DIAG_EN			0x00000040
#define CS35L53_TST_SPK_2_ENABLE		0x08C82222
#define CS35L53_TST_SPK_2_DISABLE		0x00C82222
#define CS35L53_SPK_FORCE_TST_2_SET_1		0x0000000F
#define CS35L53_SPK_FORCE_TST_2_SET_2		0x00000079
#define CS35L53_SPK_FORCE_TST_2_ENABLE_1	0x00000009
#define CS35L53_SPK_FORCE_TST_2_ENABLE_2	0x000000F9
#define CS35L53_SPK_FORCE_TST_2_DISABLE 	0x00000000
#define CS35L53_SPK_MSM_TST_3_ENABLE		0x00585941
#define CS35L53_SPK_MSM_TST_3_DISABLE		0x00580941
#define CS35L53_MSM_PUP_DONE_STS1		0x01000000
#define CS35L53_MSM_PDN_DONE_STS1		0x00800000
#define CS35L53_GP1_LVL_H			0x00008001
#define CS35L53_GP1_LVL_L			0x00000001

#endif /* __DRIVERS_SOUND_CS35L53_H__ */
